---
title: Database Schema(데이터베이스 스키마)와 SQL
date: '2023-02-21'
tags: ['database', 'computer science']
draft: false
---

## ✅ 데이터베이스의 등장

데이터베이스가 등장하기 전에는 데이터를 처리할 때 파일 처리 방식에 의존하였다. 파일 처리 방식은 1차원적인 저장 시스템으로, 각 사용자 혹은 응용 프로그램은 필요한 파일을 독립적으로 소유하고 관리한다. 그렇다보니 각 사용자들이 중복된 데이터를 가지고 있을 수도 있고, 각 사용자들이 독립적으로 관리하기 때문에 데이터가 종속성을 가지게 된다.

정리하면 기존의 파일 처리 방식은 `데이터의 종속성`과 `데이터의 중복성` 문제를 가지고 있었던 것이다.

### 데이터의 종속성 문제

여러 사용자가 각각 데이터를 관리하기 때문에, 사용자와 데이터는 1 : 1의 관계를 가진다. 따라서 데이터가 보조기억장치에 저장되는 구성방식이나 접근 방식에 맞게 응용 프로그램이 구성되어야 한다. 그래서 만약에 파일의 구성요소, 접근방식 등이 변경되면 응용 프로그램도 함께 변경되어야 하는 문제점이 있다.

### 데이터의 중복성 문제

데이터의 종속성 문제와 동일한 원인으로, 각각의 사용자 혹은 프로그램이 데이터를 관리하기때문에 자연스럽게 각각의 사용자는 동일한 데이터를 가지고 있을 가능성이 있다. 그렇게 되면 해당 데이터는 일관성을 유지하기가 쉽지가 않고, 보안에 있어서도 취약한 문제점이 있다.

이러한 문제점들을 바탕으로 등장한 것이 데이터베이스이다.

## 1. 데이터베이스란?

데이터베이스는 `한 조직의 여러 응용 시스템이 공유해서 사용하기 위한 데이터의 집합` 이다. 즉, 기존의 파일처리 시스템과 달리
하나의 데이터를 여러 사용자 혹은 프로그램들이 공유해서 사용하기 때문에, 독립적으로 데이터를 사용함으로서 일어나는 문제점들을
해결 해 줄 수 있는 것이다.

### 데이터베이스 종류

| 데이터베이스 종류 | 내용                                                                                                                                                    |
| :---------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
|    공유데이터     | 한 기간이나 조직에서 여러 응용 프로그램이 공동으로 소유하고 사용하기 위한 데이터                                                                        |
|    통합데이터     | 중복된 데이터를 배제하여 각 데이터의 일관성을 유지. 시스템의 성능 향상을 위해 제한적으로 통제된 범위 내에서 라는 조건이 있기 때문에, 완전한 배제는 아님 |
|    저장데이터     | 컴퓨터가 접근 가능한 저장매체에 저장된 데이터                                                                                                           |
|    운영데이터     | 어떤 조직의 목적과 유용성 측면에서 반드시 유지해야 할 데이터                                                                                            |

### 데이터베이스의 특징

|       특징       | 내용                                                                                                                 |
| :--------------: | -------------------------------------------------------------------------------------------------------------------- |
|  실시간 접근성   | 수시로 접근하는 사용자의 요구를 즉시 처리하여 응답을 제공                                                            |
|  계속적인 변화   | 변화되는 상태를 반영하기 위해 데이터베이스에 저장된 데이터도 삽입, 삭제, 갱신으로 계속 변화하여 정확한 데이터를 유지 |
|     동시공유     | 서로 다른 목적을 가진 여러 사용자가 동시에 원하는 데이터에 접근할 수 있다                                            |
| 내용에 의한 참조 | 데이터가 저장된 위치나 주소가 아닌 사용자가 요구하는 데이터가 가지고 있는 값에 따라 참조가 된다                      |

모든 공공재가 그렇듯, 공유되어지는 것은 관리자가 있어야 한다. 그래야 적재적소에 필요한만큼 공공재를 가져가서 사용 할 수 있기 때문이다.
데이터베이스는 `데이터베이스 시스템`에 의하여 저장,삭제,관리 등의 작업이 이루어지고 있다.

## 2. 데이터베이스 시스템

데이터베이스 시스템의 구성은 아래와 같다.

- 데이터베이스
- 데이터베이스 관리 시스템(DBMS: DataBase Management System)
- 데이터베이스 관리자(DBA: DataBase Administrator)
- 데이터베이스 기계(database machine, database computer)

### 🛠 데이터베이스 시스템 - 데이터베이스

데이터베이스는 말그대로 데이터의 집합체인데, 이 데이터베이스의 논리적 정의, 제약 조건에 대한 명세를 기술한 것을 스키마(Schema)라고 한다.
이는 데이터베이스를 바라보는 관점에 따라서 `외부스키마`,`개념스키마`,`내부스키마` 세가지로 구분된다. 이렇게 구분되어 있는 이유는
데이터베이스 관리시스템(DBMS)이 하나의 데이터베이스에 대해 서로 다른 관점을 가지고 있는 여러 사용자에게 효율적으로 데이터를 검색하고
변경 할 수 있는 기능을 제공해줘야 하기 때문이다. 이 구조를 `ANSI/SPARC`구조 라고도 한다.

![image](https://user-images.githubusercontent.com/72537762/220244460-af8dd185-fa43-43aa-a692-08b8d0ba984c.png)

#### ✍️ 외부스키마

외부 스키마는 데이터베이스 추상화의 최상위 단계로 `뷰 단계`라고도 한다. 이 외부 스키마에는 개별 사용자나
응용 프로그래머가 관심을 두는 데이터베이스의 일부분만 기술하고 다른 부분은 은폐한다.
예를 들어, 사용자가 과일에 관한 데이터베이스가 있을때 사과에 대한 데이터베이스만을 원한다면
그 외의 과일 데이터들을 은폐하는 것이다.
하나의 데이터베이스는 여러개의 응용 시스템을 지원하기 때문에 여러개의 외부 스키마가 존재한다.
외부스키마는 전체 데이터베이스의 한 논리적 부분이 되기 때문에 `서브스키마`라고도 한다.

#### ✍️ 개념스키마

개념 단계는 물리적 저장구조의 세부 사항을 은폐하고, 어떤 데이터가 저장되었는지, 데이터 간에 존재하는
관계를 기술하는 단계로서 `논리적 단계`라고도 한다. 개념 스키마는 모든 응용 프로그램이나 사용자가 필요로 하는
데이터베이스의 구조를 기술한다. 데이터베이스의 구조를 전체적이고 종합적인 관점에서 기술한 것이기 때문에
단 하나만 존재한다. 그리고 모든 외부 스키마는 이 개념 스키마로부터 생성되고 지원된다.

#### ✍️ 내부스키마

내부 단계는 물리적 단계라고도 하는데, 데이터베이스 추상화의 최하위 단계이다. 단 하나의 내부 스키마가 존재하고,
내부 스키마는 개념 스키마에 대한 저장 구조를 정의한 것이므로 `저장스키마`라고도 한다.
이 내부 스키마에는 저장 레코드 형식, 인덱스 유무, 저장 필드의 표현 방법, 저장 레코드의 물리적 순서와 같이
실제로 데이터가 어떻게 저장되는가를 기술하고 있다.
참고해야 할 점은 내부스키마가 물리적단계이긴 하지만, 물리적 데이터베이스보다 한단계 위에 있기때문에
이 자체를 물리적 레코드 취급하지는 않는다.

#### ✅ 정리하기

- 외부스키마 : 각 사용자가 원하는 데이터별로 기술한 것
- 개념스키마 : 전체 데이터베이스의 구조에 대한 내용(어떤 데이터인지, 데이터간의 관계 등)
- 내부스키마 : 개념스키마가 어떻게 저장되어 있는지에 대한 내용(데이터의 형식, 저장필드의 표현 방법 등)

#### 🖍 각 단계의 사상

위의 3단계의 데이터베이스는 스키마 사이에서 상호 변환을 하기 위한 사상(mapping)단계를 거친다. 이 개념은
데이터베이스 관리시스템의 궁극적 목표로 어떤 한 프로그램에 데이터가 종속되지 않고 독립성을 유지 할 수 있도록
도와 주는 것이다.

### 🛠 데이터베이스 시스템 - 데이터베이스 관리 시스템(DBMS: DataBase Management System)

데이터베이스 관리시스템은 데이터베이스를 구축하고 응용하기 위해 구성된 소프트웨어 시스템이다.
응용 프로그램과 데이터의 중재자 역할을 해줌으로서, 모든 응용 프로그램들이 데이터베이스를 공용할 수 있게
관리해준다. 데이터베이스의 구성, 접근방법, 관리 유지 등의 대한 모든 책임과 권한을 가진 것이 바로 이 데이터베이스 관리시스템이다.

데이터베이스 관리시스템은 아래와 같은 작업과정을 거친다.

1. 사용자는 SQL과 같은 언어를 이용하여 데이터 접근을 요구한다
2. DBMS가 요구를 받아 분석한다
3. 외부스키마, 대응하는 외부와 개념 스키마의 접속, 개념 스키마, 개념과 내부 스키마의 접속, 기억장소 구조 정의
   순으로 차례대로 검토한다.
4. 저장된 데이터베이스에 필수적인 연산을 수행한다.

### 🛠 데이터베이스 시스템 - 데이터베이스 관리자(DBA: DataBase Administrator)

데이터베이스 관리자는 데이터를 여러 사람들이 공용할 수 있도록 관리하고 제어해주는 역할을 하는 사람이다.
관리자의 가장 중요한 역할은 여러 사용자가 필요로 하는 정보에 대한 요건을 결정하고, 필요한 뷰를 제공해주는 것이다.

### 🛠 데이터베이스 시스템 - 데이터베이스 기계(database machine, database computer)

데이터베이스 기계는 데이터베이스 관리 기능을 효율적으로 수행 할 수 있도록 특화되어 설계된 하드웨어 혹은 소프트웨어를 나타낸다.

#### ✅ 정리하기

- 데이터베이스 : 데이터의 집합체
- 데이터베이스 관리 시스템(DBMS: DataBase Management System) : 데이터베이스 구축 및 응용을 위한 관리 소프트웨어
- 데이터베이스 관리자(DBA: DataBase Administrator) : 데이터베이스를 관리하는 사람 (데이터베이스 개발자)
- 데이터베이스 기계(database machine, database computer) : 데이터베이스를 관리하기 위한 기계(하드웨어 소프트웨어)

## 3. 데이터 모델링

현실세계의 데이터를 컴퓨터세계의 데이터베이스 구조로 변환하는 과정을 데이터 모델링 이라고 한다.
이 모델링 과정을 쉽게 할 수 있도록, 데이터 타입, 데이터의 연산, 데이터의 의미 및 일관성 제약 조건 등
데이터베이스의 구조를 추상화하여 체계적으로 명시하기 위한 도구를 `데이터 모델`이라고 한다.

데이터 모델은 개념적 모델, 논리적 모델, 물리적 모델로 분류 할 수 있다.

이 중에서 가장 많이 사용하는 모델은 논리적 모델의 종류인 `개체-관계 모델`이다.
개체-관계 모델은 개체와 개체관의 관계를 개념적으로 데이터베이스에 표현하기 위한 데이터 모델로,
행과 열로 구성된 테이블 형식으로 나타내 구현한다.

쉬운 예로, 우리가 흔히 보는 엑셀 파일을 관계형 모델이라고 할 수 있다. 이 관계형 모델은 데이터 표현은 단순하고
직관적이지만, 기본적으로 관계 대수와 관계 해석에 따른 수학적 개념에 근거하고 있다.
따라서 Oracle, MSSQL,MySQL,PostgresSQL등 대다수의 상용 DBMS가 관계형 모델을 사용하고 있다.

관계형 데이터 모델의 구성은 아래와 같다.

|     용어     | 의미                          |
| :----------: | ----------------------------- |
|   릴레이션   | 테이블                        |
|     투플     | 행,레코드                     |
|     속성     | 열,필드,데이터항목            |
|     차수     | 속성의 개수                   |
| 영역(도메인) | 속성이 가질 수 있는 값의 집합 |
|  카디널리티  | 투플의 개수                   |

예를 들어서, 이 관계형 데이터 모델 구성 표를 각 용어로 정리해보면 아래와 같다.

|     용어     | 의미                                      |
| :----------: | ----------------------------------------- |
|   릴레이션   | 관계형 데이터모델 구성표                  |
|     투플     | 릴레이션, 투플 등 각각의 가로줄, 행       |
|     속성     | 용어, 의미 각각의 세로줄, 열              |
|     차수     | 2개, 용어 / 의미                          |
| 영역(도메인) | 용어에 속하는 값, 의미에 속하는 값의 집합 |
|  카디널리티  | 6개                                       |

## SQL

SQL(Structured Query Language)은 관계 데이터베이스를 위한 구조화된 질의어다.
SQL은 데이터 정의어, 데이터 조작어를 포함하고 있어서, SQL을 사용하면 데이터베이스를 정의,조작, 제어 등의 작업을 할 수 있게 된다. 그리고 관계형 데이터 모델의 용어인, 릴레이션, 투플, 속성과 같은 표현보다는 테이블, 행, 열과 같은 표현을 사용하고 개별적인 레코드 단위보다는 레코드 집합 단위로 연산을
수행한다.

### 데이터 정의어

SQL의 데이터 정의어는 스키마, 도메인, 테이블, 뷰, 인덱스를 정의하거나 제거하는 문장으로 구성된다.

|    명령어    | 의미                               |
| :----------: | ---------------------------------- |
| CREATE TABLE | 새로운 테이블 생성                 |
| ALTER TABLE  | 테이블 변경 / 삭제, 열추가 삭제 등 |
|  DROP TABLE  | 테이블 삭제                        |
| CREATE VIEW  | 뷰 생성                            |
|  DROP VIEW   | 뷰 삭제                            |
| CREATE INDEX | 테이블 인덱스 생성                 |
|  DROP INDEX  | 테이블 인덱스 삭제                 |

> view: 기본 테이블로부터 만들어진 가상 테이블. 뷰에서 조작한 연산은 결과적으로 기본 테이블 내용을
> 자동으로 변하게 만든다. 데이터베이스 재구성 시 어느정도 데이터의 독립성을 제공해 줄 수 있고,
> 같은 데이터를 동시에 여러 사용자에게 다른 방법으로 볼 수 있게 해준다.

```SQL
CREATE TABLE 공급자 (
	공급자번호 CHAR(5) NOT NULL, // 길이가 n(바이트)으로 고정된 문자열
	공급자이름 VARCHAR(20), // 최대 길이가 n(바이트)인 가변길이 문자열
	도시 VARCHAR(20),
	PRIMARY KEY(공급자번호) // 데이터베이스 식별 기본 키
)
```

| 공급자번호 | 공급자이름 | 도시 |
| :--------: | :--------: | :--: |
|     S1     |   김뿅뿅   | 서울 |
|     S2     |   박뿅뿅   | 김포 |

### 데이터 조작

| 명령어 |    의미     |
| :----: | :---------: |
| SELECT | 데이터 검색 |
| UPDATE | 데이터 수정 |
| DELETE | 데이터 삭제 |
| INSERT | 데이터 삽입 |

✅ 예시) 데이터 검색하기

```sql
// SELECT 열 FROM 테이블 WHERE 조건문
SELECT 공급자이름 FROM 공급자 WHERE 도시 = '서울'
// => 김뿅뿅
```

## 4. MySQL 알아보기

MySQL은 가장 널리 사용되고 있는 관계형 데이터베이스 관리 시스템(DBMS)이다.
오픈 소스로 제공되며, 다중 사용자와 다중 스레드를 지원한다.
MySQL은 특히 PHP와 함께 웹 개발에 자주 사용되고, 표준 SQL 형식을 사용하기때문에 전세계적으로 널리 사용되고 있다. MySQL에 관한 내용은 아래 참고 사이트에서 자세히 공부해볼 수 있다.

[참고: TCPschool MySQL](http://www.tcpschool.com/mysql/mysql_intro_intro)

[참고: 데이터베이스란?](https://www.oracle.com/kr/database/what-is-database/)

[참고: W3school MySQL 놀이터](https://www.w3schools.com/sql/default.asp)

**참고: 방송통신대학교 컴퓨터과학과 컴퓨터학개론 교재**
