---
title: Spring 웹개발 기초
date: '2023-07-14'
tags: ['java']
draft: false
---

## 스프링이란?

스프링은 `스프링 어플리케이션 컨텍스트`라는 `컨테이너`를 제공하는데, 이 컨테이너는 어플리케이션 컴포넌트들을 생성하고 관리한다. 스프링 어플리케이션의 컴포넌트 또는 빈(bean)들은 컨텍스트 내부에서 서로 연결되어 완전한 어플리케이션을 만든다.

스프링 컨테이너는 스프링 빈의 생명 주기를 관리하며, 생성된 스프링 빈들에게 추가적인 기능을 제공하는 역할을 한다. IoC와 DI의 원리가 스프링 컨테이너에 적용된다.

## Bean이란?

Spring IoC 컨테이너가 관리하는 자바 객체를 Bean이라고 부른다. 기존의 Java Programming에서는 Class를 생잉성하고 new 키워드로 인스턴스를 만들어야 객체를 사용할 수 있었다. 하지만 spring에서는 직접 new를 이용해서 생성한 객체가 아니라, Spring에 의해서 관리당하는 객체를 사용하게 된다.

이와 같은 Bean들의 상호연결은 `의존성 주입`을 통해 이루어 진다. 어플리케이션 컴포넌트에서 의존하는 다른 빈의 생성과 관리를 자체적으로 하는 대신 별도의 개체가 해주며, 이 개체에서는 모든 컴포넌트를 생성, 관리하고 해당 컴포넌트를 필요로 하는 빈에 주입한다.

### 💡 Bean이라고 이름지은 이유 vs Java Beans

Java라는 언어는 인도네시아 Java 섬에서 커피를 즐겨마시던 개발자에 의해 만들어지게 되었다. 그래서 Java와 관련된 용어가 커피와 관련된 용어를 사용했다고 한다. 그 중 Java 프로그램의 구성요소를 커피콩에 비유해서 Bean이라고 칭한 것이다. 또한 Bean을 항아리에 담겠다라고 해서, 최종 빌드된 패키징 파일은 `.jar`파일로 생성되게 된다.

`.class`파일은 hex 문자열로 보면 파일 내용의 맨앞에 `CAFEBABE`이라고 되어 있다고 한다.

<img
  width="172"
  alt="image"
  src="https://github.com/Jiyun-Parkk/algorithm-test/assets/72537762/cfc38494-95f1-4cd2-8c65-6c05b32ef214"
/>

Java Beans는 특정 규칙을 지킨 클래스를 가르키는 뜻으로 사용된다. Java Beans는 필드가 private으로 구성되어 getter, setter를 통해서만 접근할 수 있고 전달 인자가 없는 생성자를 가지는 형태를 말한다. POJO(Plain Old Java Object)와 거의 동일한 개념이라고 이해하면 된다.

✅**Java Bean 규약**

- 반드시 클래스는 패키지화 되어야 함
- 멤버변수는 property라고 함
- 멤버변수는 private로 지정하고, 외부접근을 위한 get, set 메소드를 정의해야 함
- get, set 메소드는 public으로 지정

이렇게 만든 Java Bean의 목적은 데이터를 보여주는 것에 있다. 따라서 JSP에서 `<Jsp:useBean>`태그를 활용해서 property의 값을 보여준다고 한다.

Spring Bean은 일반 Java 객체와 다른점은 없지만, 스프링 IoC 컨테이너에서 관리되는 객체라는 점에서 차이점이 있다. 따라서 스프링 프레임워크의 컨테이너에 의해서 인스턴스화가 되고, 관리되는 객체다.

이를 Bean이라고 부르게 된 이유는, 초기 버전에서 스프링이 자바빈과 함께 사용하기 위한 것이었기 때문이라고 한다. 스프링에서 관리하는 bean은 기존의 Java Bean의 규칙인 기본 생성자, getter, setter 와 같은 특성이 없더라도 객체를 관리할 수 있게 된다. 스프링 빈이 Java Beans이 될 수도 있지만, 꼭 지키지 않아도 개발을 할 수 있다.

## 스프링에서 Bean 만들기

### 1. XML 방식

기존의 스프링 버전에서는 XML파일을 사용해서 빈을 상호 연결했었다. XML에 아래와 같이 클래스를 등록하면 해당 클래스는 Spring에게 관리받는 bean으로 등록된다.

```XML
<bean id="sample" class="com.example.sample"/>
```

하지만 최신버전의 스프링에서는 Java코드로만 bean을 등록해서 사용한다.

### 2. @Configuration

Configuration 어노테이션은 각 빈을 스프링 어플리케이션 컨텍스트에 제공하는 구성 클래스라는 것을 스프링에게 알려준다.

구성 클래스의 메서드에는 `@Bean` 어노테이션이 지정되어 있으며, 반환되는 객체가 bean으로 추가되어야 한다는 것을 명시한다.

```java
@Configuration
public class Config {
  @Bean
  public controller sampleController() {
    return new controller;
  }
}
```

이 방법을 사용하면 XML에서 설정해주는 것보다 타입 안전 향상 및 리팩토링 기능 등의 장점을 제공해준다. 하지만 스프링은 컴포넌트들을 자동 구성 할 수 있는 기능이 있어서 이와 같은 설정을 해주지 않아도 된다.

따라서 자동 구성을 할 수 없을 경우에만 사용하면 된다.

### 3. @Autowired 와 Component scan

스프링에서는 컴포넌트 스캔 기능을 통해 자동으로 어플리케이션의 classpath에 지정된 컴포넌트를 찾은 후 스프링 어플리케이션 컨텍스트의 bean으로 생성할 수 있다.

또한 `@Autowired`를 활용하면 의존관계가 있는 컴포넌트를 자동으로 다른 Bean에 주입해준다. 최근에 스프링부트에서는 이와 같은 자동연결 기능이 더욱 향상되었다고 한다.
