---
title: PlanetScale setup í•˜ê¸°
date: '2023-02-27'
tags: ['planetscale']
draft: false
---

## ğŸ‘‹ PlanetScaleì´ë€?

PlanetScaleì€ MySQLê³¼ í˜¸í™˜ë˜ëŠ” ì„œë²„ë¦¬ìŠ¤ ë°ì´í„°ë² ì´ìŠ¤ í”Œë«í¼ì´ë‹¤. PlanetScaleì€ Vitessë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, VitessëŠ” MySQLì„ ìŠ¤ì¼€ì¼ë§í•˜ê¸° ìœ„í•œ ë°ì´í„°ë² ì´ìŠ¤ í´ëŸ¬ìŠ¤í„°ë§ ì‹œìŠ¤í…œì´ë‹¤.

> ë°ì´í„° ìŠ¤ì¼€ì¼ë§: ë°ì´í„° ì „ì²˜ë¦¬ ê³¼ì •ì˜ í•˜ë‚˜. ë°ì´í„° ê°’ì˜ ë²”ìœ„ë¥¼ ì¡°ì •í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.

> ë°ì´í„° í´ëŸ¬ìŠ¤í„°ë§: í•˜ë‚˜ì˜ êµ°ì§‘ì— ìˆê³  ê° ë°ì´í„° í¬ì¸íŠ¸ê°€ ì„œë¡œ ë¹„ìŠ·í•œ ë°ì´í„°ë¥¼ ë¶„ë¥˜í•´ì£¼ëŠ” ì‘ì—…

## 1. CLIë¡œ planetScale ì„¤ì¹˜í•´ì£¼ê¸°

[PlanetScale CLI](https://github.com/planetscale/cli#installation)

```
brew install planetscale/tap/pscale
brew install mysql-client
```

## 2. planetScale ì œëŒ€ë¡œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸°

ì•„ë˜ì™€ê°™ì´ `pscale`ë¡œ ì œëŒ€ë¡œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³¼ ìˆ˜ ìˆë‹¤.

```bash
pscale
```

## 3. database ë§Œë“¤ê¸°

databaseë¥¼ ë§Œë“¤ê¸°ì „ì— ë¨¼ì € pscale ë¡œê·¸ì¸ì„ í•˜ì.
ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ë°”ë¡œ PlanetScale í˜ì´ì§€ê°€ ì—´ë¦¬ê³  ì¸ì¦ì½”ë“œë¥¼ í™•ì¸í•´ì£¼ë©´
ë¡œì»¬ì—ì„œ ë¡œê·¸ì¸ì´ ì™„ë£Œëœë‹¤.

```bash
pscalse auth login
```

ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ë©´ pscaleì´ ì§€ì›í•˜ëŠ” ì§€ì—­ì„ ì‚´í´ë³´ì. ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œë„ í™•ì¸í•  ìˆ˜ ìˆê³ 
ê³µì‹ë¬¸ì„œì—ì„œë„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

[PlanetScale region list](https://planetscale.com/docs/reference/region)

```bash
pscale region
```

```
  NAME (9)                            SLUG                 ENABLED
 ----------------------------------- -------------------- ---------
  AWS us-east-1 (Northern Virginia)   us-east              Yes
  AWS us-west-2 (Oregon)              us-west              Yes
  AWS eu-west-1 (Dublin)              eu-west              Yes
  AWS ap-south-1 (Mumbai)             ap-south             Yes
  AWS ap-southeast-1 (Singapore)      ap-southeast         Yes
  AWS ap-northeast-1 (Tokyo)          ap-northeast         Yes
  AWS eu-central-1 (Frankfurt)        eu-central           Yes
  AWS ap-southeast-2 (Sydney)         aws-ap-southeast-2   Yes
  AWS sa-east-1 (Sao Paulo)           aws-sa-east-1        Yes
  AWS eu-west-2 (London)              aws-eu-west-2        Yes
```

ìš°ë¦¬ëŠ” `ap-northeast`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

ì‚¬ìš©í•  ë°ì´í„°ë² ì´ìŠ¤ ì§€ì—­ì„ í™•ì¸í–ˆìœ¼ë‹ˆ ì´ì œ create ëª…ë ¹ì–´ë¡œ databaseë¥¼ ë§Œë“¤ì–´ì£¼ë©´ëœë‹¤.

databaseë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ëª…ë ¹ì–´ëŠ” ì•„ë˜ì˜ ê·œì¹™ì„ ë”°ë¥¸ë‹¤

```bash
pscale database create <database name> --region <region slug>
```

ë¬¼ë¡  ì‚¬ì´íŠ¸ì—ì„œ ì§ì ‘ ë§Œë“¤ì–´ì¤„ ìˆ˜ë„ ìˆê¸´ í•˜ë‹¤! í•˜ì§€ë§Œ CLIì— ìµìˆ™í•˜ë©´ ì´ ë°©ë²•ì´ ë” í¸í•´ì§„ë‹¤.
ìœ„ ëª…ë ¹ì–´ë¡œ ë§Œë“¤ê³  PlanetScale í˜ì´ì§€ì— ë“¤ì–´ê°€ë³´ë©´ databaseê°€ ë§Œë“¤ì–´ì§„ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

## 4. database ì—°ê²°í•˜ê¸°

ë§Œë“¤ì–´ì§„ databaseë¥¼ ì‚¬ìš©í•  í”„ë¡œì íŠ¸ì—ì„œ connet ëª…ë ¹ì„ í•˜ë©´ databaseë¥¼ ì†ì‰½ê²Œ ì—°ê²°í•  ìˆ˜ ìˆë‹¤.
ë³¸ë˜ AWSë‚˜ Postgresì™€ ê°™ì€ ë‹¤ë¥¸ databaseë“¤ì€ ë³´í†µ database ì•”í˜¸ë¥¼ ì‚¬ìš©í•´ì„œ
ê°€ìƒì˜ databaseì™€ ì‹¤ì œ database ë‘ê°€ì§€ë¥¼ ìš´ìš©í•œë‹¤.

í•˜ì§€ë§Œ planetScaleì€ ê°„ë‹¨í•œ ëª…ë ¹ì–´ë¡œ databaseë¥¼ ì—°ê²°í•´ì„œ ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤.

```bash
pscale connect <database name>
```

### ì—°ê²° ì„±ê³µ ê²°ê³¼

```
Secure connection to database carrot-market and branch main is established!.

Local address to connect your application: 127.0.0.1:3306 (press ctrl-c to quit)
```

ìœ„ì™€ ê°™ì€ ë¬¸êµ¬ê°€ ë‚˜ì™”ë‹¤ë©´ ì—°ê²°ì— ì„±ê³µí•œ ê²ƒì´ë‹¤.
`127.0.0.1:3306`ìœ¼ë¡œ ì—°ê²°ì´ ë˜ì—ˆë‹¤ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì—, í•´ë‹¹ í„°ë¯¸ë„ì„ ì‚­ì œí•˜ì§€ ë§ê³  ìœ ì§€í•´ì•¼ í•œë‹¤.

### prismaì— ì—°ê²°í•˜ê¸°

prismaì—ì„œ ì´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•˜ë ¤ë©´ ìœ„ì—ì„œ ì—°ê²°ëœ `127.0.0.1:3306`ì„ ë³µì‚¬í•´ì„œ .env íŒŒì¼ì— ë¶™ì—¬ë„£ì–´ì¤€ë‹¤.

```
DATABASE_URL=mysql://127.0.0.1:3306/carrot-market
```

ê·¸ëŸ¼ ì´ì œ ì—°ê²° ë!
