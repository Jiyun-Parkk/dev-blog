---
title: Prisma란?
date: '2023-02-20'
tags: ['prisma']
draft: false
---

## ORM (Object Relational Model)

ORM은 `객체-관계-매핑`의 약자이다. 여기서 객체는 OOP의 객체를, 관계는 관계형 데이터베이스를 의미한다. 따라서 ORM을 다시 정의해보면 객체와 데이터베이스의 관계를 매핑해주는 도구라고 할 수 있다.

이렇게 객체와 관계형 데이터베이스를 매핑 해주는 도구가 나오게 된 이유는, `Back to basic(기본에 충실하자)`을 지키기 위해서라고 한다. 보다 객체지향적인 프로그래밍을 하자는데서 시작 한 것이다.

## ORM을 사용하는 이유

객체지향 프로그래밍을 할때, 객체에는 여러가지 정보들을 담고 있다. 예를들어, `Car`라는 객체에는 자동차의 색깔, 출력, 옵션 등의 정보들이 있다고 해보자.
이렇게 생성한 객체를 저장하기 위해 데이터베이스에 입력하고, 이 데이터베이스의 테이블의 정보를 SQL 문을 통해 관계를 설정해주게 된다. 여기서 이 테이블과 객체간의 이질성이 발생 하게 된다. ORM은 객체와 테이블간의 관계를 설정하여 자동으로 처리해주면서 이질성 문제를 해결 해준다.

### ORM의 장점

- CRUD를 위한 긴 SQL문장을 작성 할 필요가 없다
- 각 모델 별로 코드를 작성하여 가독성을 높여 준다
- SQL의 절차적 접근이 아닌 객체적 접근으로 생산성을 높여준다

## Prisma

Prisma는 Node.js와 Typescript의 `ORM Framework`로 Javascript 또는 Typescript와 데이터베이스 사이에 다리를 놓아주는 역할을 해준다. 즉 Javascript 코드와 데이터베이스의 관계를 정의해준다.

일반적으로 SQL을 원시적으로 사용하게 되면, 굉장히 번거롭고 많은 오버헤드(수동 연결, 반복적인 상용구)를 발생시켜 생산성이 저하되고 쿼리 결과에 대한 타입 안정성이 떨어진다.

그리고 기존의 ORM은 SQL의 원시적 작성에 따른 문제점은 해결하지만, 쉽게 모델을 추상화 함으로써 관계형 데이터가 오브젝트에 쉽게 매핑 될 수 있다는 가정에 기반하고 있어 많은 복잡성과 함정이 발생한다.

Prisma는 SQL이 아닌 데이터 자체에 관심을 기울임으로써, 개발자의 실수를 줄여줄 수가 있다. 다시말해서, SQL문을 알지 못해도 손쉽게 데이터베이스의 매핑이 가능해진다는 것이다.

하나의 예를 보면 아래의 User라는 테이블에서 id가 1인 사용자를 찾기 위해서는 아래와 같이 사용해야 한다.

```SQL
SELECT * FROM User WHERE id=1
```

그런데 Prisma를 사용하면 SQL문을 사용하지도 않고 좀 더 직관적으로 표현된다.

```javascript
prisma.user.findOne(
	where: {
		id: 1
	}
)
```

### Prisma의 장점

- Schema를 기반으로 한 Database 자동생성
- 관계형 데이터를 매핑하는 대신 개체를 고려
- 복잡한 모델 객체를 피하기 위해 클래스가 아닌 쿼리문을 사용
- 데이터베이스 및 어플리케이션 모델을 위한 단일 정보 소스
- 정확한 결과값을 보여줄 수 있는 추상화
- 문서를 찾아볼 필요 없이 코드 편집기에서 자동 완성
- 상용구가 적어 직관적으로 볼 수 있음
