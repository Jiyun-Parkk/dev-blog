---
title: MPA/SPA/CSR/SSR
date: '2022-12-09'
tags: ['web']
draft: false
---

## MPA(Multi Page Application)

전통적인 웹의 렌더링 방식은 서버에 페이지에 대한 요청을 하고, http 응답을 받게 되면 브라우저
렌더링 엔진이 http 응답으로 받은 자원들을 활용해서 페이지를 렌더링 해준다. 그래서 웹 서버에 어떠한
요청을 할 때마다 브라우저는 새로고침을 하고 새로운 페이지를 렌더링 한다.

이와 같은 환경에서 사용자가 어떤 동작으로 인해 서버에 데이터 변화에 대한 요청을 보내게 되면, 그 작은 변화
하나를 반영시키기 위해 처음부터 끝까지 한 페이지를 다시 렌더링 해야 한다.

동일한 개념으로 다른 페이지로 이동을 할 때도 아예 새로운 페이지에 대한 요청을 하게 되므로
일반적인 웹사이트는 여러개의 페이지를 가지고 있다. 그래서 이런 전통적인 방식의 웹 페이지들을
`MPA(Multi Page Application)`이라고 한다.

하지만 요즘의 웹 페이지는 옛날과 비교 할 수 없을 만큼, 컨텐츠가 방대하고 서버에 대한 요청도
많아졌기 때문에 위와 같은 방식의 렌더링은 성능면에 있어서 많은 리소스를 낭비 할 수 밖에 없다.
게다가 모바일 시대가 도래하게 되면서, 상대적으로 컴퓨터보다 성능이 낮은 모바일에서도 동일한
페이지를 사용자가 문제없이 보기 위해서는 성능을 최적화 시킬 필요성이 높아졌다.
이러한 환경에서 등장한 것이 바로 `SPA(Single Page Application)`이다.

## SPA(Single Page Application) / CSR(Client Side Rendering)

SPA는 대표적으로 `React`, `Vue`, `Angular` 등의 라이브러리나 프레임워크로 개발 할 수 있다.
가장 인기가 많은 툴은 `React`이고 `Angular`는 사용법이 어렵고 무거워서 거의 사라지고 있는 추세다.
`SPA`의 기본적인 개념은 `하나의 페이지에서 모든 컨텐츠를 렌더링`하는 것이라 볼 수 있다.

SPA의 구동방식은 아래와 같다.

1. 브라우저가 서버에 요청하면 데이터가 없는 HTML과 로직이 담겨 있는 JS를 받아온다.
2. 비어있는 HTML에 동적으로 JS를 사용해서 DOM을 그려낸다.
3. 사용자의 상호작용으로 인해 변화가 있을 경우, 가상 DOM과 실제 DOM을 비교하여 변화된 부분만 렌더링 해준다.
4. 서버는 클라이언트가 요청한 부분에 대해 `JSON`으로 응답을 보내준다.

정리하면 SPA는 최초 한번만 모든 리소스를 받아와서, 이후의 변화들은 클라이언트 측에서 동적으로 구동된다.
그리고 가상 DOM을 활용해서 페이지에 어떤 변화가 있을 경우 변화 된 일부분만 리렌더링을 하기 때문에
기존의 `MPA`방식 보다 성능 최적화 면에서 우수하다.

이렇게 `SPA`가 구동되는 방식을 `CSR(Client Side Rendering)`이라고 한다.

이렇게만 보면 `SPA`가 엄청난 장점만 가지고 있는 것 같지만, 단점도 여럿 있다.

1. 기본적으로 대부분의 웹 크롤러는 자바스크립트를 읽어내지 못한다.
   따라서 SEO(검색 엔진 최적화)에 있어서 문제점이 생긴다.
2. 최초 한번 모든 리소스를 받아 오는 것 때문에 초기 구동 속도가 느려질 수 있다.
3. 특정 경로를 직접 주소창에 입력하여 진입시 404 오류를 만나게 된다.

이러한 문제점들은 `CSR(Client Side Rendering)`을 하기 때문에 생기는 문제점들인데,
기존의 `MPA`는 `SSR(Server Side Rendering)`을 하기 때문에 위와 같은 문제점들이 발생하지 않는다.

따라서 이런 부분들을 해결하기 위해 `Next.js`와 `Nuxt.js`가 나타나게 되었다.

## CSR 때문에 문제? 그러면 Next.js, Nuxt.js를 사용해보자

`Next.js`와 `Nuxt.js` 이 두개의 프레임워크는 `SSR + CSR`방식으로 사용 할 수 있게 해준다.
`Next.js`는 `React`, `Nuxt.js`는 `Vue`를 기반으로 사용하는 프레임워크다.

`SSR + CSR`방식은 `Next.js`와 `Nuxt.js` 프레임워크에 내장된 서버에서 `static`한 데이터들을
(html, css, img) `pre rendering`을 해주고 이를 바탕으로 각각 `React`와 `Vue` 환경에서 `CSR`방식으로
페이지를 그려주는 것이다.

이렇게 해주면 기존의 빈 html만 보여주던 `SPA`페이지 소스에서 static한 html 코드들을 확인 할 수 있다.
그럼 웹크롤러가 데이터 수집이 가능해져 `SEO`최적화 문제를 해결 할 수 있다.

이 외에도 `Next.js`와 `Nuxt.js` 자체에서 제공해주는 기능들이 기존의
`React`, `Vue` 보다 편하게 개발 할 수 있는 환경을 제공 해주기 때문에 작업 편의성도 한층 올릴 수가 있다.
